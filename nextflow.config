params {
        config_profile_description = 'Nextflow Config for PaliDIS'
        config_profile_contact = 'Victoria Carr'
        github_repo = 'https://github.com/blue-moon22/palidis4'

        manifest = ""
        output_prefix = ""
        batch_name = "batch"
        lsf = false

        min_itr_length = 25
        max_itr_length = 50
        kmer_length = 15
        min_is_len = 500
        max_is_len = 3000
        chunk_size = 80000
        interproscan_version = "5.57-90.0"
        interproscan_db = "interproscan-${interproscan_version}"
        interproscan_tarball = "${interproscan_db}-64-bit.tar.gz"
        interproscan_link = "https://ftp.ebi.ac.uk/pub/software/unix/iprscan/5/${interproscan_version}/${interproscan_tarball}"
        db_path = "./db"
}

profiles {

        standard {
                docker {
                        enabled = true
                }
                process {
                        container = 'bluemoon222/palidis_dependencies:0.0.22'
                        cpus = 1
                        memory = "4000 MB"
                        errorStrategy = {task.attempt <= 0 ? 'retry' : 'ignore'}
                        maxRetries = 0
                        withName:convertToFasta {
                                memory = '8000 MB'
                                cpus = 4
                                queue = 'long'
                        }
                        withName:filterContigs {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:palmem {
                                memory = '64000 MB'
                                cpus = 8
                                queue = 'long'
                        }
                        withName:buildDB {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:runProdigal {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:mergeTSV {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:installInterproscan {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:runInterproscan {
                                memory = {16000.MB * task.attempt}
                                cpus = 8
                                queue = 'long'
                        }
                        withName:contigCandidates {
                                memory = '8000 MB'
                                queue = 'normal'
                        }
                        withName:clipIRs {
                                memory = {16000.MB * task.attempt}
                                queue = 'normal'
                        }
                        withName:mapIRs {
                                memory = '64000 MB'
                                queue = 'long'
                                cpus = 8
                        }
                        withName:getInsertionSequences {
                                memory = '64000 MB'
                                queue = 'long'
                        }
                }
        }
        github_ci {
                docker {
                        enabled = true
                }
                process {
                        container = 'bluemoon222/palidis_dependencies:0.0.22'
                        memory = "4000 MB"
                        cpus = 1
                        withName:convertToFasta {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:filterContigs {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:palmem {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:buildDB {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:runProdigal {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:mergeTSV {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:installInterproscan {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:runInterproscan {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:contigCandidates {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:clipIRs {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:mapIRs {
                                memory = '4000 MB'
                                cpus = 1
                        }
                        withName:getInsertionSequences {
                                memory = '4000 MB'
                                cpus = 1
                        }
                }
        }
}
